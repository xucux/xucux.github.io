{"meta":{"title":"Xucux's Blog","subtitle":"Xucuxçš„æŠ€æœ¯åˆ†äº«åšå®¢","description":"ä¸€ä¸ªè®°å½•ç¼–ç¨‹çŸ¥è¯†çš„å°ç«™ï¼","author":"xucux","url":"https://xucux.github.io","root":"/"},"pages":[{"title":"","date":"2023-01-30T08:37:18.023Z","updated":"2023-01-30T08:37:18.023Z","comments":true,"path":"404.html","permalink":"https://xucux.github.io/404.html","excerpt":"","text":"404 å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨ å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"},{"title":"","date":"2023-01-30T08:37:18.023Z","updated":"2023-01-30T08:37:18.023Z","comments":true,"path":"about/index.html","permalink":"https://xucux.github.io/about/index.html","excerpt":"","text":"ä¸‹é¢å†™å…³äºè‡ªå·±çš„å†…å®¹"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2023-01-30T08:37:18.023Z","updated":"2023-01-30T08:37:18.023Z","comments":true,"path":"categories/index.html","permalink":"https://xucux.github.io/categories/index.html","excerpt":"","text":""},{"title":"æˆ‘çš„æœ‹å‹ä»¬","date":"2023-01-30T08:37:18.023Z","updated":"2023-01-30T08:37:18.023Z","comments":true,"path":"friends/index.html","permalink":"https://xucux.github.io/friends/index.html","excerpt":"è¿™é‡Œå†™å‹é“¾ä¸Šæ–¹çš„å†…å®¹ã€‚","text":"è¿™é‡Œå†™å‹é“¾ä¸Šæ–¹çš„å†…å®¹ã€‚ è¿™é‡Œå¯ä»¥å†™å‹é“¾é¡µé¢ä¸‹æ–¹çš„æ–‡å­—å¤‡æ³¨ï¼Œä¾‹å¦‚è‡ªå·±çš„å‹é“¾è§„èŒƒã€ç¤ºä¾‹ç­‰ã€‚","author":"xucux"},{"title":"","date":"2023-01-30T08:37:18.023Z","updated":"2023-01-30T08:37:18.023Z","comments":true,"path":"list/index.html","permalink":"https://xucux.github.io/list/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2023-01-30T08:37:18.023Z","updated":"2023-01-30T08:37:18.023Z","comments":true,"path":"tags/index.html","permalink":"https://xucux.github.io/tags/index.html","excerpt":"","text":""},{"title":"","date":"2021-09-21T01:55:57.000Z","updated":"2023-01-30T08:37:18.023Z","comments":true,"path":"more/catchCat/index.html","permalink":"https://xucux.github.io/more/catchCat/index.html","excerpt":"","text":"æ¸¸æˆè§„åˆ™ ç‚¹å‡»å°åœ†ç‚¹ï¼Œå›´ä½å°çŒ«ã€‚ ä½ ç‚¹å‡»ä¸€æ¬¡ï¼Œå°çŒ«èµ°ä¸€æ¬¡ã€‚ ç›´åˆ°ä½ æŠŠå°çŒ«å›´ä½ï¼ˆèµ¢ï¼‰ï¼Œæˆ–è€…å°çŒ«èµ°åˆ°è¾¹ç•Œå¹¶é€ƒè·‘ï¼ˆè¾“ï¼‰ã€‚"},{"title":"","date":"2022-09-22T01:55:57.000Z","updated":"2023-01-30T08:37:18.023Z","comments":false,"path":"page/bookmarks/index.html","permalink":"https://xucux.github.io/page/bookmarks/index.html","excerpt":"","text":"ğŸ”–æ”¶è—çš„ä¹¦ç­¾ğŸ”–","author":"xucux"},{"title":"","date":"2022-09-22T01:55:57.000Z","updated":"2023-01-30T08:37:18.023Z","comments":true,"path":"page/messages/index.html","permalink":"https://xucux.github.io/page/messages/index.html","excerpt":"","text":"ğŸ“ç•™è¨€æ¿ ğŸ¨æ¬¢è¿ä½ çš„æ¥è®¿ï¼Œè¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼ŒğŸš¯æ–‡æ˜çŒæ°´ï¼Œè°¢è°¢åˆä½œ~","author":"xucux"}],"posts":[{"title":"SpringBooté›†æˆä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººï¼ˆè¿ç»´æŠ¥è­¦ï¼‰","slug":"SpringBooté›†æˆä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººï¼ˆè¿ç»´æŠ¥è­¦ï¼‰","date":"2023-01-29T09:40:50.000Z","updated":"2023-01-30T08:37:18.023Z","comments":true,"path":"post/SpringBooté›†æˆä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººï¼ˆè¿ç»´æŠ¥è­¦ï¼‰/","link":"","permalink":"https://xucux.github.io/post/SpringBoot%E9%9B%86%E6%88%90%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E7%BE%A4%E6%9C%BA%E5%99%A8%E4%BA%BA%EF%BC%88%E8%BF%90%E7%BB%B4%E6%8A%A5%E8%AD%A6%EF%BC%89/","excerpt":"ä¹‹å‰æœ‰é›†æˆè¿‡é’‰é’‰ç¾¤æœºå™¨äººğŸ¤–æŠ¥è­¦ï¼Œè¿™æ¬¡ä¸»è¦æ˜¯SpringBooté›†æˆä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººæŠ¥è­¦ï¼Œä¸»è¦ä½¿ç”¨ä¸¤ç§æ–¹å¼è°ƒç”¨ä¼ä¸šå¾®ä¿¡çš„HttpApiï¼Œä¸€ç§ä¸ºForestï¼Œä¸€ç§ä¸ºRestTemplate","text":"ä¹‹å‰æœ‰é›†æˆè¿‡é’‰é’‰ç¾¤æœºå™¨äººğŸ¤–æŠ¥è­¦ï¼Œè¿™æ¬¡ä¸»è¦æ˜¯SpringBooté›†æˆä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººæŠ¥è­¦ï¼Œä¸»è¦ä½¿ç”¨ä¸¤ç§æ–¹å¼è°ƒç”¨ä¼ä¸šå¾®ä¿¡çš„HttpApiï¼Œä¸€ç§ä¸ºForestï¼Œä¸€ç§ä¸ºRestTemplate ç›¸å…³æ–‡æ¡£ï¼š ä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººé…ç½®è¯´æ˜ 1.é…ç½®å‚æ•°12345678910111213141516171819202122import lombok.Getter;import lombok.Setter;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.stereotype.Component;import java.util.List;/** * @descriptions: é…ç½®å‚æ•° * @author: xucux */@Component@Getter@Setter@ConfigurationProperties(prefix = &quot;notice&quot;)public class NoticeProperties &#123; private String wechatKey; private List&lt;String&gt; phoneList;&#125; è¿™ä¸ªkeyçš„è·å–æ–¹å¼ï¼šç¾¤æœºå™¨äººé…ç½®è¯´æ˜ yamlæ–‡ä»¶é…ç½®æ•°æ®ï¼š 12345notice: ####### ä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººkey wechat-key: xxxxxxxxx-xxx-xxx-xxxx-xxxxxxxxxx ####### éœ€è¦@çš„ç¾¤æˆå‘˜æ‰‹æœºå· phone-list: 2.Forestçš„Httpå®¢æˆ·ç«¯é…ç½®ä½¿ç”¨Forestè¿™é‡Œç”¨çš„Forest ï¼Œæ„Ÿè§‰è¿˜æŒºå¼ºå¤§çµæ´» å®˜æ–¹æ–‡æ¡£ï¼Œå¦‚æœä½ å–œæ¬¢ä½¿ç”¨httpClientæˆ–è€…okHttpå»ºè®®ä½ çœ‹çœ‹forest ï¼›å¦‚æœä½ æ›´å–œæ¬¢RestTemplateï¼Œé‚£å°±ä½¿ç”¨RestTemplateã€‚ POMä¾èµ–123456&lt;!-- è½»é‡çº§HTTPå®¢æˆ·ç«¯æ¡†æ¶ --&gt;&lt;dependency&gt; &lt;groupId&gt;com.dtflys.forest&lt;/groupId&gt; &lt;artifactId&gt;forest-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.5.28&lt;/version&gt;&lt;/dependency&gt; yamlæ–‡ä»¶é…ç½®æ—¥å¿—æ‰“å¼€å…³é—­è¯·å‚è€ƒè‡ªå·±çš„ä¸šåŠ¡éœ€è¦ 123456789101112131415161718192021222324## è½»é‡çº§HTTPå®¢æˆ·ç«¯æ¡†æ¶forestforest: # é…ç½®åº•å±‚APIä¸º okhttp3 backend: okhttp3 # è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼Œé»˜è®¤å€¼ä¸º500 max-connections: 1000 # æ¯ä¸ªè·¯ç”±çš„æœ€å¤§è¿æ¥æ•°ï¼Œé»˜è®¤å€¼ä¸º500 max-route-connections: 500 # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’, é»˜è®¤å€¼ä¸º3000 timeout: 3000 # è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’, é»˜è®¤å€¼ä¸º2000 connect-timeout: 3000 # è¯·æ±‚å¤±è´¥åé‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ä¸º0æ¬¡ä¸é‡è¯• retry-count: 1 # å•å‘éªŒè¯çš„HTTPSçš„é»˜è®¤SSLåè®®ï¼Œé»˜è®¤ä¸ºSSLv3 ssl-protocol: SSLv3 # æ‰“å¼€æˆ–å…³é—­æ—¥å¿—ï¼Œé»˜è®¤ä¸ºtrue logEnabled: true # æ‰“å¼€/å…³é—­Forestè¯·æ±‚æ—¥å¿—ï¼ˆé»˜è®¤ä¸º trueï¼‰ log-request: true # æ‰“å¼€/å…³é—­Forestå“åº”çŠ¶æ€æ—¥å¿—ï¼ˆé»˜è®¤ä¸º trueï¼‰ log-response-status: true # æ‰“å¼€/å…³é—­Forestå“åº”å†…å®¹æ—¥å¿—ï¼ˆé»˜è®¤ä¸º falseï¼‰ log-response-content: true å‘é€è¯·æ±‚1234567891011121314151617181920public interface NoticeClient &#123; /** * ä¼ä¸šå¾®ä¿¡æœºå™¨äºº å‘é€ https è¯·æ±‚ * * @param keyValue * @return */ @Post( url = &quot;https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=&#123;keyValue&#125;&quot;, headers = &#123; &quot;Accept-Charset: utf-8&quot;, &quot;Content-Type: application/json&quot; &#125;, dataType = &quot;json&quot; ) ForestResponse&lt;JsonObject&gt; weChatNotice(@Var(&quot;keyValue&quot;) String keyValue, @JSONBody Map&lt;String, Object&gt; body );&#125; 3.å®šä¹‰æœåŠ¡3.1 æ¥å£1234567891011121314151617181920212223242526/** * @descriptions: æ¶ˆæ¯é€šçŸ¥æ¥å£ * @author: xucux */public interface NoticeService &#123; /** * å‘é€é”™è¯¯ä¿¡æ¯è‡³ç¾¤æœºå™¨äºº * @param throwable * @param msg */ void sendError(Throwable throwable,String msg); /** * å‘é€æ–‡æœ¬ä¿¡æ¯è‡³ç¾¤æœºå™¨äºº * @param msg */ void sendByMd(String msg); /** * å‘é€mdè‡³ç¾¤æœºå™¨äºº * @param msg æ–‡æœ¬æ¶ˆæ¯ * @param isAtALL æ˜¯å¦@æ‰€æœ‰äºº trueæ˜¯ falseå¦ */ void sendByText(String msg,boolean isAtALL);&#125; 3.2 æœåŠ¡å®ç°æ³¨æ„ï¼šè¿™é‡Œçš„åŒ…åï¼ˆcom.githubï¼‰å¡«è‡ªå·±é¡¹ç›®å†…çš„åŒ…å 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163import com.dtflys.forest.http.ForestResponse;import com.google.gson.JsonObject;import lombok.extern.slf4j.Slf4j;import org.apache.commons.collections4.CollectionUtils;import org.apache.commons.lang3.StringUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Service;import java.io.ByteArrayOutputStream;import java.io.PrintStream;import java.time.LocalDateTime;import java.time.format.DateTimeFormatter;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;import java.util.regex.Matcher;import java.util.regex.Pattern;import java.util.stream.Collectors;/** * @descriptions: é€šçŸ¥å®ç° * @author: xucux */@Service@Slf4jpublic class NoticeServiceImpl implements NoticeService &#123; @Value(&quot;$&#123;spring.application.name&#125;&quot;) private String appName; @Value(&quot;$&#123;spring.profiles.active&#125;&quot;) private String env; @Autowired private NoticeClient noticeClient; @Autowired private NoticeProperties noticeProperties; /** * å‘é€é”™è¯¯ä¿¡æ¯è‡³ç¾¤æœºå™¨äºº * * @param throwable * @param msg */ @Override public void sendError(Throwable throwable, String msg) &#123; String errorClassName = throwable.getClass().getSimpleName(); if (StringUtils.isBlank(msg))&#123; msg = throwable.getMessage() == null ? &quot;å‡ºç°nullå€¼&quot; : throwable.getMessage(); &#125; ByteArrayOutputStream baos = new ByteArrayOutputStream(); throwable.printStackTrace(new PrintStream(baos)); String bodyStr = StringComUtils.limitStrNone(regexThrowableStr(baos.toString()),450); String md = getMdByTemplate(appName, env, errorClassName, msg, bodyStr); sendByMd(md); &#125; /** * å‘é€æ–‡æœ¬ä¿¡æ¯è‡³ç¾¤æœºå™¨äºº * * @param msg */ @Override public void sendByMd(String msg) &#123; try &#123; Map&lt;String, Object&gt; params = buildMdParams(msg); ForestResponse&lt;JsonObject&gt; response = noticeClient.weChatNotice(noticeProperties.getWechatKey(), params); log.debug(&quot;WeChatRobo-Send Error:&#123;&#125; Status:&#123;&#125;&quot;,response.isError(),response.getStatusCode()); &#125; catch (Exception e) &#123; log.error(&quot;WeChatRobot-å‘é€æ–‡æœ¬æ¶ˆæ¯å¼‚å¸¸ body:&#123;&#125;&quot;,msg,e); &#125; &#125; /** * å‘é€mdè‡³ç¾¤æœºå™¨äºº * * @param msg */ @Override public void sendByText(String msg,boolean isAtALL) &#123; try &#123; Map&lt;String, Object&gt; params = buildTextParams(msg,noticeProperties.getPhoneList(),isAtALL); ForestResponse&lt;JsonObject&gt; response = noticeClient.weChatNotice(noticeProperties.getWechatKey(), params); log.debug(&quot;WeChatRobo-Send Error:&#123;&#125; Status:&#123;&#125;&quot;,response.isError(),response.getStatusCode()); &#125; catch (Exception e) &#123; log.error(&quot;WeChatRobot-å‘é€æ–‡æœ¬æ¶ˆæ¯å¼‚å¸¸ body:&#123;&#125;&quot;,msg,e); &#125; &#125; /** * æ„å»ºå‘é€æ–‡æœ¬æ¶ˆæ¯æ ¼å¼çš„å‚æ•° * @param phoneList @ç¾¤ç”¨æˆ· * @param isAtALL æ˜¯å¦@æ‰€æœ‰äºº * @return */ private Map&lt;String,Object&gt; buildTextParams(String text, List&lt;String&gt; phoneList, boolean isAtALL)&#123; Map&lt;String,Object&gt; params = new HashMap&lt;&gt;(); Map&lt;String,Object&gt; data = new HashMap&lt;&gt;(); data.put(&quot;content&quot;,text); if (isAtALL)&#123; phoneList.add(&quot;@all&quot;); &#125; if (CollectionUtils.isNotEmpty(phoneList))&#123; data.put(&quot;mentioned_mobile_list&quot;, phoneList); &#125; params.put(&quot;msgtype&quot;,&quot;text&quot;); params.put(&quot;text&quot;,data); return params; &#125; /** * æ„å»ºå‘é€markdownæ¶ˆæ¯æ ¼å¼çš„å‚æ•° * * @param md * @return */ private Map&lt;String,Object&gt; buildMdParams(String md)&#123; Map&lt;String,Object&gt; params = new HashMap&lt;&gt;(); Map&lt;String,Object&gt; data = new HashMap&lt;&gt;(); data.put(&quot;content&quot;,md); params.put(&quot;msgtype&quot;,&quot;markdown&quot;); params.put(&quot;markdown&quot;,data); return params; &#125; private String regexThrowableStr(String str)&#123; try &#123; // æ³¨æ„ï¼šè¿™é‡Œçš„åŒ…åï¼ˆcom.githubï¼‰å¡«è‡ªå·±é¡¹ç›®å†…çš„åŒ…å String pattern = &quot;(com)(\\\\.)(github)(.&#123;10,200&#125;)(\\\\))&quot;; Pattern r = Pattern.compile(pattern); Matcher m=r.matcher(str); List&lt;String&gt; list = new ArrayList&lt;&gt;(); while (m.find()) &#123; list.add(m.group()); &#125; if (CollectionUtils.isEmpty(list))&#123; return str; &#125; String s = list.stream().collect(Collectors.joining(&quot;\\n&quot;)); return s; &#125; catch (Exception e) &#123; return str; &#125; &#125; private String getMdByTemplate(String appName,String env,String errorClassName,String msg,String bodyStr)&#123; String titleTpl = &quot;### å¼‚å¸¸å‘Šè­¦é€šçŸ¥\\n#### åº”ç”¨ï¼š%s\\n#### ç¯å¢ƒï¼š&lt;font color=\\&quot;info\\&quot;&gt;%s&lt;/font&gt;\\n##### å¼‚å¸¸ï¼š&lt;font color=\\&quot;warning\\&quot;&gt;%s&lt;/font&gt;\\n&quot;; String bodyTpl = &quot;\\nMsgï¼š%s\\nDetailï¼š\\n&gt;%s&quot;; String footerTpl = &quot;\\n&lt;font color=\\&quot;comment\\&quot;&gt;%s&lt;/font&gt;&quot;; String title = String.format(titleTpl, appName, env, errorClassName); String body = String.format(bodyTpl, msg,bodyStr); String dateStr = LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyy/MM/dd HH:mm:ss&quot;)); String footer = String.format(footerTpl, dateStr); return title.concat(body).concat(footer); &#125;&#125; ä½¿ç”¨åˆ°çš„å·¥å…·æ–¹æ³•ï¼š 123456789101112131415161718/** * é™åˆ¶æ–‡æœ¬æè¿° * * @param content å†…å®¹æˆ–é—®é¢˜ * @param charNumber é•¿åº¦ * @return */public static String limitStrNone(String content ,int charNumber)&#123; if (StringUtils.isNotBlank(content))&#123; if (content.length() &gt; charNumber)&#123; String substring = content.substring(0, charNumber); return substring; &#125;else &#123; return content; &#125; &#125; return &quot;&quot;;&#125; 4.ç¾¤æ¥æ”¶æ¶ˆæ¯çš„æ•ˆæœ 5.ä½¿ç”¨RestTemplateå‘é€è¯·æ±‚æ—¶é…ç½®RestTemplate12345678910111213141516171819202122232425262728293031323334353637import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.data.redis.core.RedisTemplate;import org.springframework.http.client.ClientHttpRequestFactory;import org.springframework.http.client.SimpleClientHttpRequestFactory;import org.springframework.web.client.RestTemplate;import java.util.Collections;/** * @descriptions: RestTemplateé…ç½® * @author: xucux */@Configurationpublic class RestTemplateConfig &#123; @Bean public RestTemplate restTemplate(ClientHttpRequestFactory factory,)&#123; RestTemplate restTemplate = new RestTemplate(factory); //restTemplate.setInterceptors(Collections.singletonList(restLogInterceptor)); // è¿™é‡Œå¯ä»¥æ³¨å…¥è‡ªå®šä¹‰æ‹¦æˆªå™¨ return restTemplate; &#125; @Bean public ClientHttpRequestFactory simpleClientHttpRequestFactory()&#123; SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory(); // å•ä½ä¸ºms factory.setReadTimeout(10000); // å•ä½ä¸ºms factory.setConnectTimeout(10000); return factory; &#125;&#125; é‡æ–°åœ¨å†™ä¸€ä¸ªNoticeClientï¼Œå…¶ä¸­è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ä»‹ç»RestTemplateå¦‚ä½•å‘é€æ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667import com.alibaba.fastjson.JSONObject;import com.sztb.component.exception.BaseAssert;import org.apache.commons.lang3.StringUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.core.io.InputStreamResource;import org.springframework.core.io.Resource;import org.springframework.http.HttpEntity;import org.springframework.http.HttpHeaders;import org.springframework.http.MediaType;import org.springframework.http.ResponseEntity;import org.springframework.util.LinkedMultiValueMap;import org.springframework.util.MultiValueMap;import org.springframework.web.client.RestTemplate;import java.io.IOException;import java.io.InputStream;import java.util.Map;/** * @descriptions: å‘é€ç»™ä¼ä¸šå¾®ä¿¡æœºå™¨äºº * @author: xucux * * https://work.weixin.qq.com/api/doc/90000/90136/91770 */public class NoticeClient &#123; @Autowired private RestTemplate restTemplate; public static final String SEND_MESSAGE_URL = &quot;https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=&#123;weChatKey&#125;&quot;; public static final String UPLOAD_FILE_URL = &quot;https://qyapi.weixin.qq.com/cgi-bin/webhook/upload_media?key=&#123;weChatKey&#125;&amp;type=file&quot;; public ResponseEntity&lt;JSONObject&gt; weChatNotice(String weChatKey, Map&lt;String, Object&gt; body )&#123; BaseAssert.verify(StringUtils.isBlank(weChatKey),&quot;æ¶ˆæ¯æ¨é€ç»™æœºå™¨äººå¤±è´¥ï¼Œæœªé…ç½®ï¼šweChatKey&quot;); ResponseEntity&lt;JSONObject&gt; response = restTemplate.postForEntity(SEND_MESSAGE_URL, body, JSONObject.class,weChatKey); return response; &#125; public ResponseEntity&lt;JSONObject&gt; uploadMedia(String weChatKey, String fileName, InputStream inputStream)&#123; BaseAssert.verify(StringUtils.isAnyBlank(weChatKey,fileName),&quot;æ–‡ä»¶æ¨é€ä¼ä¸šå¾®ä¿¡å¤±è´¥ï¼Œæœªé…ç½®ï¼šweChatKeyï¼ŒfileName&quot;); HttpHeaders headers = new HttpHeaders(); headers.setContentType(MediaType.MULTIPART_FORM_DATA); MultiValueMap&lt;String, Object&gt; body = new LinkedMultiValueMap&lt;&gt;(); // æ–°å»ºæµèµ„æºï¼Œå¿…é¡»é‡å†™contentLength()å’ŒgetFilename() Resource resource = new InputStreamResource(inputStream)&#123; //æ–‡ä»¶é•¿åº¦,å•ä½å­—èŠ‚ @Override public long contentLength() throws IOException &#123; long size = inputStream.available(); return size; &#125; //æ–‡ä»¶å @Override public String getFilename()&#123; return fileName; &#125; &#125;; body.add(&quot;media&quot;,resource); HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; entity = new HttpEntity(body, headers); ResponseEntity&lt;JSONObject&gt; response = restTemplate.postForEntity(UPLOAD_FILE_URL, entity, JSONObject.class,weChatKey); return response; &#125;&#125;","categories":[{"name":"Java","slug":"Java","permalink":"https://xucux.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://xucux.github.io/tags/Java/"},{"name":"ä¼ä¸šå¾®ä¿¡","slug":"ä¼ä¸šå¾®ä¿¡","permalink":"https://xucux.github.io/tags/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://xucux.github.io/tags/SpringBoot/"},{"name":"æŠ¥è­¦","slug":"æŠ¥è­¦","permalink":"https://xucux.github.io/tags/%E6%8A%A5%E8%AD%A6/"}],"author":"xucux"},{"title":"Mavençš„settingé…ç½®å±æ€§è§£æ","slug":"Mavençš„settingé…ç½®å±æ€§è§£æ","date":"2023-01-29T09:33:05.000Z","updated":"2023-01-30T08:37:18.023Z","comments":true,"path":"post/Mavençš„settingé…ç½®å±æ€§è§£æ/","link":"","permalink":"https://xucux.github.io/post/Maven%E7%9A%84setting%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E8%A7%A3%E6%9E%90/","excerpt":"Mavençš„setting.xmlæ–‡ä»¶è§£æ","text":"Mavençš„setting.xmlæ–‡ä»¶è§£æ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;settings xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt; &lt;!--æœ¬åœ°ä»“åº“ã€‚è¯¥å€¼è¡¨ç¤ºæ„å»ºç³»ç»Ÿæœ¬åœ°ä»“åº“çš„è·¯å¾„ã€‚å…¶é»˜è®¤å€¼ä¸º$&#123;user.home&#125;/.m2/repositoryã€‚ --&gt; &lt;localRepository&gt;$&#123;user.home&#125;/.m2/repository &lt;/localRepository&gt; &lt;!--Mavenæ˜¯å¦éœ€è¦å’Œç”¨æˆ·äº¤äº’ä»¥è·å¾—è¾“å…¥ã€‚å¦‚æœMavenéœ€è¦å’Œç”¨æˆ·äº¤äº’ä»¥è·å¾—è¾“å…¥ï¼Œåˆ™è®¾ç½®æˆtrueï¼Œåä¹‹åˆ™åº”ä¸ºfalseã€‚é»˜è®¤ä¸ºtrueã€‚ --&gt; &lt;interactiveMode&gt;true&lt;/interactiveMode&gt; &lt;!--Mavenæ˜¯å¦éœ€è¦ä½¿ç”¨plugin-registry.xmlæ–‡ä»¶æ¥ç®¡ç†æ’ä»¶ç‰ˆæœ¬ã€‚ --&gt; &lt;!--å¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™åœ¨&#123;user.home&#125;/.m2ä¸‹éœ€è¦æœ‰ä¸€ä¸ªplugin-registry.xmlæ¥å¯¹pluginçš„ç‰ˆæœ¬è¿›è¡Œç®¡ç† --&gt; &lt;!--é»˜è®¤ä¸ºfalseã€‚ --&gt; &lt;usePluginRegistry&gt;false&lt;/usePluginRegistry&gt; &lt;!--è¡¨ç¤ºMavenæ˜¯å¦éœ€è¦åœ¨ç¦»çº¿æ¨¡å¼ä¸‹è¿è¡Œã€‚å¦‚æœæ„å»ºç³»ç»Ÿéœ€è¦åœ¨ç¦»çº¿æ¨¡å¼ä¸‹è¿è¡Œï¼Œåˆ™ä¸ºtrueï¼Œé»˜è®¤ä¸ºfalseã€‚ --&gt; &lt;!--å½“ç”±äºç½‘ç»œè®¾ç½®åŸå› æˆ–è€…å®‰å…¨å› ç´ ï¼Œæ„å»ºæœåŠ¡å™¨ä¸èƒ½è¿æ¥è¿œç¨‹ä»“åº“çš„æ—¶å€™ï¼Œè¯¥é…ç½®å°±ååˆ†æœ‰ç”¨ã€‚ --&gt; &lt;offline&gt;false&lt;/offline&gt; &lt;!--å½“æ’ä»¶çš„ç»„ç»‡Idï¼ˆgroupIdï¼‰æ²¡æœ‰æ˜¾å¼æä¾›æ—¶ï¼Œä¾›æœå¯»æ’ä»¶ç»„ç»‡Idï¼ˆgroupIdï¼‰çš„åˆ—è¡¨ã€‚ --&gt; &lt;!--è¯¥å…ƒç´ åŒ…å«ä¸€ä¸ªpluginGroupå…ƒç´ åˆ—è¡¨ï¼Œæ¯ä¸ªå­å…ƒç´ åŒ…å«äº†ä¸€ä¸ªç»„ç»‡Idï¼ˆgroupIdï¼‰ã€‚ --&gt; &lt;!--å½“æˆ‘ä»¬ä½¿ç”¨æŸä¸ªæ’ä»¶ï¼Œå¹¶ä¸”æ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸ºå…¶æä¾›ç»„ç»‡Idï¼ˆgroupIdï¼‰çš„æ—¶å€™ï¼ŒMavenå°±ä¼šä½¿ç”¨è¯¥åˆ—è¡¨ã€‚ --&gt; &lt;!--é»˜è®¤æƒ…å†µä¸‹è¯¥åˆ—è¡¨åŒ…å«äº†org.apache.maven.pluginsã€‚ --&gt; &lt;pluginGroups&gt; &lt;!--pluginçš„ç»„ç»‡Idï¼ˆgroupIdï¼‰ --&gt; &lt;pluginGroup&gt;org.codehaus.mojo&lt;/pluginGroup&gt; &lt;/pluginGroups&gt; &lt;!--ç”¨æ¥é…ç½®ä¸åŒçš„ä»£ç†ï¼Œå¤šä»£ç†profileså¯ä»¥åº”å¯¹ç¬”è®°æœ¬æˆ–ç§»åŠ¨è®¾å¤‡çš„å·¥ä½œç¯å¢ƒï¼šé€šè¿‡ç®€å•çš„è®¾ç½®profile idå°±å¯ä»¥å¾ˆå®¹æ˜“çš„æ›´æ¢æ•´ä¸ªä»£ç†é…ç½®ã€‚ --&gt; &lt;proxies&gt; &lt;!--ä»£ç†å…ƒç´ åŒ…å«é…ç½®ä»£ç†æ—¶éœ€è¦çš„ä¿¡æ¯ --&gt; &lt;proxy&gt; &lt;!--ä»£ç†çš„å”¯ä¸€å®šä¹‰ç¬¦ï¼Œç”¨æ¥åŒºåˆ†ä¸åŒçš„ä»£ç†å…ƒç´ ã€‚ --&gt; &lt;id&gt;myproxy&lt;/id&gt; &lt;!--è¯¥ä»£ç†æ˜¯å¦æ˜¯æ¿€æ´»çš„é‚£ä¸ªã€‚trueåˆ™æ¿€æ´»ä»£ç†ã€‚å½“æˆ‘ä»¬å£°æ˜äº†ä¸€ç»„ä»£ç†ï¼Œè€ŒæŸä¸ªæ—¶å€™åªéœ€è¦æ¿€æ´»ä¸€ä¸ªä»£ç†çš„æ—¶å€™ï¼Œè¯¥å…ƒç´ å°±å¯ä»¥æ´¾ä¸Šç”¨å¤„ã€‚ --&gt; &lt;active&gt;true&lt;/active&gt; &lt;!--ä»£ç†çš„åè®®ã€‚ åè®®://ä¸»æœºå:ç«¯å£ï¼Œåˆ†éš”æˆç¦»æ•£çš„å…ƒç´ ä»¥æ–¹ä¾¿é…ç½®ã€‚ --&gt; &lt;protocol&gt;http://â€¦&lt;/protocol&gt; &lt;!--ä»£ç†çš„ä¸»æœºåã€‚åè®®://ä¸»æœºå:ç«¯å£ï¼Œåˆ†éš”æˆç¦»æ•£çš„å…ƒç´ ä»¥æ–¹ä¾¿é…ç½®ã€‚ --&gt; &lt;host&gt;proxy.somewhere.com&lt;/host&gt; &lt;!--ä»£ç†çš„ç«¯å£ã€‚åè®®://ä¸»æœºå:ç«¯å£ï¼Œåˆ†éš”æˆç¦»æ•£çš„å…ƒç´ ä»¥æ–¹ä¾¿é…ç½®ã€‚ --&gt; &lt;port&gt;8080&lt;/port&gt; &lt;!--ä»£ç†çš„ç”¨æˆ·åï¼Œç”¨æˆ·åå’Œå¯†ç è¡¨ç¤ºä»£ç†æœåŠ¡å™¨è®¤è¯çš„ç™»å½•åå’Œå¯†ç ã€‚ --&gt; &lt;username&gt;proxyuser&lt;/username&gt; &lt;!--ä»£ç†çš„å¯†ç ï¼Œç”¨æˆ·åå’Œå¯†ç è¡¨ç¤ºä»£ç†æœåŠ¡å™¨è®¤è¯çš„ç™»å½•åå’Œå¯†ç ã€‚ --&gt; &lt;password&gt;somepassword&lt;/password&gt; &lt;!--ä¸è¯¥è¢«ä»£ç†çš„ä¸»æœºååˆ—è¡¨ã€‚è¯¥åˆ—è¡¨çš„åˆ†éš”ç¬¦ç”±ä»£ç†æœåŠ¡å™¨æŒ‡å®šï¼›ä¾‹å­ä¸­ä½¿ç”¨äº†ç«–çº¿åˆ†éš”ç¬¦ï¼Œä½¿ç”¨é€—å·åˆ†éš”ä¹Ÿå¾ˆå¸¸è§ã€‚ --&gt; &lt;nonProxyHosts&gt;*.google.com|ibiblio.org&lt;/nonProxyHosts&gt; &lt;/proxy&gt; &lt;/proxies&gt; &lt;!--é…ç½®æœåŠ¡ç«¯çš„ä¸€äº›è®¾ç½®ã€‚ä¸€äº›è®¾ç½®å¦‚å®‰å…¨è¯ä¹¦ä¸åº”è¯¥å’Œpom.xmlä¸€èµ·åˆ†å‘ã€‚è¿™ç§ç±»å‹çš„ä¿¡æ¯åº”è¯¥å­˜åœ¨äºæ„å»ºæœåŠ¡å™¨ä¸Šçš„settings.xmlæ–‡ä»¶ä¸­ã€‚ --&gt; &lt;servers&gt; &lt;!--æœåŠ¡å™¨å…ƒç´ åŒ…å«é…ç½®æœåŠ¡å™¨æ—¶éœ€è¦çš„ä¿¡æ¯ --&gt; &lt;server&gt; &lt;!--è¿™æ˜¯serverçš„idï¼ˆæ³¨æ„ä¸æ˜¯ç”¨æˆ·ç™»é™†çš„idï¼‰ï¼Œè¯¥idä¸distributionManagementä¸­repositoryå…ƒç´ çš„idç›¸åŒ¹é…ã€‚ --&gt; &lt;id&gt;server001&lt;/id&gt; &lt;!--é‰´æƒç”¨æˆ·åã€‚é‰´æƒç”¨æˆ·åå’Œé‰´æƒå¯†ç è¡¨ç¤ºæœåŠ¡å™¨è®¤è¯æ‰€éœ€è¦çš„ç™»å½•åå’Œå¯†ç ã€‚ --&gt; &lt;username&gt;my_login&lt;/username&gt; &lt;!--é‰´æƒå¯†ç  ã€‚é‰´æƒç”¨æˆ·åå’Œé‰´æƒå¯†ç è¡¨ç¤ºæœåŠ¡å™¨è®¤è¯æ‰€éœ€è¦çš„ç™»å½•åå’Œå¯†ç ã€‚ --&gt; &lt;password&gt;my_password&lt;/password&gt; &lt;!--é‰´æƒæ—¶ä½¿ç”¨çš„ç§é’¥ä½ç½®ã€‚å’Œå‰ä¸¤ä¸ªå…ƒç´ ç±»ä¼¼ï¼Œç§é’¥ä½ç½®å’Œç§é’¥å¯†ç æŒ‡å®šäº†ä¸€ä¸ªç§é’¥çš„è·¯å¾„ï¼ˆé»˜è®¤æ˜¯/home/hudson/.ssh/id_dsaï¼‰ä»¥åŠå¦‚æœéœ€è¦çš„è¯ï¼Œä¸€ä¸ªå¯†é’¥ --&gt; &lt;!--å°†æ¥passphraseå’Œpasswordå…ƒç´ å¯èƒ½ä¼šè¢«æå–åˆ°å¤–éƒ¨ï¼Œä½†ç›®å‰å®ƒä»¬å¿…é¡»åœ¨settings.xmlæ–‡ä»¶ä»¥çº¯æ–‡æœ¬çš„å½¢å¼å£°æ˜ã€‚ --&gt; &lt;privateKey&gt;$&#123;usr.home&#125;/.ssh/id_dsa&lt;/privateKey&gt; &lt;!--é‰´æƒæ—¶ä½¿ç”¨çš„ç§é’¥å¯†ç ã€‚ --&gt; &lt;passphrase&gt;some_passphrase&lt;/passphrase&gt; &lt;!--æ–‡ä»¶è¢«åˆ›å»ºæ—¶çš„æƒé™ã€‚å¦‚æœåœ¨éƒ¨ç½²çš„æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ªä»“åº“æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨æƒé™ï¼ˆpermissionï¼‰ã€‚--&gt; &lt;!--è¿™ä¸¤ä¸ªå…ƒç´ åˆæ³•çš„å€¼æ˜¯ä¸€ä¸ªä¸‰ä½æ•°å­—ï¼Œå…¶å¯¹åº”äº†unixæ–‡ä»¶ç³»ç»Ÿçš„æƒé™ï¼Œå¦‚664ï¼Œæˆ–è€…775ã€‚ --&gt; &lt;filePermissions&gt;664&lt;/filePermissions&gt; &lt;!--ç›®å½•è¢«åˆ›å»ºæ—¶çš„æƒé™ã€‚ --&gt; &lt;directoryPermissions&gt;775&lt;/directoryPermissions&gt; &lt;!--ä¼ è¾“å±‚é¢å¤–çš„é…ç½®é¡¹ --&gt; &lt;configuration&gt;&lt;/configuration&gt; &lt;/server&gt; &lt;/servers&gt; &lt;!--ä¸ºä»“åº“åˆ—è¡¨é…ç½®çš„ä¸‹è½½é•œåƒåˆ—è¡¨ã€‚ --&gt; &lt;mirrors&gt; &lt;!--ç»™å®šä»“åº“çš„ä¸‹è½½é•œåƒã€‚ --&gt; &lt;mirror&gt; &lt;!--è¯¥é•œåƒçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚idç”¨æ¥åŒºåˆ†ä¸åŒçš„mirrorå…ƒç´ ã€‚ --&gt; &lt;id&gt;planetmirror.com&lt;/id&gt; &lt;!--é•œåƒåç§° --&gt; &lt;name&gt;PlanetMirror Australia&lt;/name&gt; &lt;!--è¯¥é•œåƒçš„URLã€‚æ„å»ºç³»ç»Ÿä¼šä¼˜å…ˆè€ƒè™‘ä½¿ç”¨è¯¥URLï¼Œè€Œéä½¿ç”¨é»˜è®¤çš„æœåŠ¡å™¨URLã€‚ --&gt; &lt;url&gt;http://downloads.planetmirror.com/pub/maven2&lt;/url&gt; &lt;!--è¢«é•œåƒçš„æœåŠ¡å™¨çš„idã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è¦è®¾ç½®äº†ä¸€ä¸ªMavenä¸­å¤®ä»“åº“ï¼ˆhttp://repo1.maven.org/maven2ï¼‰çš„é•œåƒï¼Œ--&gt; &lt;!--å°±éœ€è¦å°†è¯¥å…ƒç´ è®¾ç½®æˆcentralã€‚è¿™å¿…é¡»å’Œä¸­å¤®ä»“åº“çš„id centralå®Œå…¨ä¸€è‡´ã€‚ --&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;/mirror&gt; &lt;/mirrors&gt; &lt;!--æ ¹æ®ç¯å¢ƒå‚æ•°æ¥è°ƒæ•´æ„å»ºé…ç½®çš„åˆ—è¡¨ã€‚settings.xmlä¸­çš„profileå…ƒç´ æ˜¯pom.xmlä¸­profileå…ƒç´ çš„è£å‰ªç‰ˆæœ¬ã€‚--&gt; &lt;!--å®ƒåŒ…å«äº†idï¼Œactivation, repositories, pluginRepositorieså’Œ propertieså…ƒç´ ã€‚--&gt; &lt;!--è¿™é‡Œçš„profileå…ƒç´ åªåŒ…å«è¿™äº”ä¸ªå­å…ƒç´ æ˜¯å› ä¸ºè¿™é‡Œåªå…³å¿ƒæ„å»ºç³»ç»Ÿè¿™ä¸ªæ•´ä½“ï¼ˆè¿™æ­£æ˜¯settings.xmlæ–‡ä»¶çš„è§’è‰²å®šä½ï¼‰ï¼Œè€Œéå•ç‹¬çš„é¡¹ç›®å¯¹è±¡æ¨¡å‹è®¾ç½®ã€‚--&gt; &lt;!--å¦‚æœä¸€ä¸ªsettingsä¸­çš„profileè¢«æ¿€æ´»ï¼Œå®ƒçš„å€¼ä¼šè¦†ç›–ä»»ä½•å…¶å®ƒå®šä¹‰åœ¨POMä¸­æˆ–è€…profile.xmlä¸­çš„å¸¦æœ‰ç›¸åŒidçš„profileã€‚ --&gt; &lt;profiles&gt; &lt;!--æ ¹æ®ç¯å¢ƒå‚æ•°æ¥è°ƒæ•´çš„æ„ä»¶çš„é…ç½® --&gt; &lt;profile&gt; &lt;!--è¯¥é…ç½®çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ --&gt; &lt;id&gt;test&lt;/id&gt; &lt;!--è‡ªåŠ¨è§¦å‘profileçš„æ¡ä»¶é€»è¾‘ã€‚Activationæ˜¯profileçš„å¼€å¯é’¥åŒ™ã€‚--&gt; &lt;!--å¦‚POMä¸­çš„profileä¸€æ ·ï¼Œprofileçš„åŠ›é‡æ¥è‡ªäºå®ƒèƒ½å¤Ÿåœ¨æŸäº›ç‰¹å®šçš„ç¯å¢ƒä¸­è‡ªåŠ¨ä½¿ç”¨æŸäº›ç‰¹å®šçš„å€¼ï¼›è¿™äº›ç¯å¢ƒé€šè¿‡activationå…ƒç´ æŒ‡å®šã€‚--&gt; &lt;!--activationå…ƒç´ å¹¶ä¸æ˜¯æ¿€æ´»profileçš„å”¯ä¸€æ–¹å¼ã€‚settings.xmlæ–‡ä»¶ä¸­çš„activeProfileå…ƒç´ å¯ä»¥åŒ…å«profileçš„idã€‚--&gt; &lt;!--profileä¹Ÿå¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œï¼Œä½¿ç”¨-Pæ ‡è®°å’Œé€—å·åˆ†éš”çš„åˆ—è¡¨æ¥æ˜¾å¼çš„æ¿€æ´»ï¼ˆå¦‚ï¼Œ-P testï¼‰ã€‚ --&gt; &lt;activation&gt; &lt;!--profileé»˜è®¤æ˜¯å¦æ¿€æ´»çš„æ ‡è¯† --&gt; &lt;activeByDefault&gt;false&lt;/activeByDefault&gt; &lt;!--activationæœ‰ä¸€ä¸ªå†…å»ºçš„javaç‰ˆæœ¬æ£€æµ‹ï¼Œå¦‚æœæ£€æµ‹åˆ°jdkç‰ˆæœ¬ä¸æœŸå¾…çš„ä¸€æ ·ï¼Œprofileè¢«æ¿€æ´»ã€‚ --&gt; &lt;jdk&gt;1.7&lt;/jdk&gt; &lt;!--å½“åŒ¹é…çš„æ“ä½œç³»ç»Ÿå±æ€§è¢«æ£€æµ‹åˆ°ï¼Œprofileè¢«æ¿€æ´»ã€‚oså…ƒç´ å¯ä»¥å®šä¹‰ä¸€äº›æ“ä½œç³»ç»Ÿç›¸å…³çš„å±æ€§ã€‚ --&gt; &lt;os&gt; &lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿçš„åå­— --&gt; &lt;name&gt;Windows XP&lt;/name&gt; &lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿæ‰€å±å®¶æ—(å¦‚ &#x27;windows&#x27;) --&gt; &lt;family&gt;Windows&lt;/family&gt; &lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„ --&gt; &lt;arch&gt;x86&lt;/arch&gt; &lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬ --&gt; &lt;version&gt;5.1.2600&lt;/version&gt; &lt;/os&gt; &lt;!--å¦‚æœMavenæ£€æµ‹åˆ°æŸä¸€ä¸ªå±æ€§ï¼ˆå…¶å€¼å¯ä»¥åœ¨POMä¸­é€šè¿‡$&#123;åç§°&#125;å¼•ç”¨ï¼‰ï¼Œå…¶æ‹¥æœ‰å¯¹åº”çš„åç§°å’Œå€¼ï¼ŒProfileå°±ä¼šè¢«æ¿€æ´»ã€‚--&gt; &lt;!--å¦‚æœå€¼å­—æ®µæ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå­˜åœ¨å±æ€§åç§°å­—æ®µå°±ä¼šæ¿€æ´»profileï¼Œå¦åˆ™æŒ‰åŒºåˆ†å¤§å°å†™æ–¹å¼åŒ¹é…å±æ€§å€¼å­—æ®µ --&gt; &lt;property&gt; &lt;!--æ¿€æ´»profileçš„å±æ€§çš„åç§° --&gt; &lt;name&gt;mavenVersion&lt;/name&gt; &lt;!--æ¿€æ´»profileçš„å±æ€§çš„å€¼ --&gt; &lt;value&gt;2.0.3&lt;/value&gt; &lt;/property&gt; &lt;!--æä¾›ä¸€ä¸ªæ–‡ä»¶åï¼Œé€šè¿‡æ£€æµ‹è¯¥æ–‡ä»¶çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨æ¥æ¿€æ´»profileã€‚missingæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ¿€æ´»profileã€‚--&gt; &lt;!--å¦ä¸€æ–¹é¢ï¼Œexistsåˆ™ä¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ¿€æ´»profileã€‚ --&gt; &lt;file&gt; &lt;!--å¦‚æœæŒ‡å®šçš„æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ¿€æ´»profileã€‚ --&gt; &lt;exists&gt;/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/&lt;/exists&gt; &lt;!--å¦‚æœæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ¿€æ´»profileã€‚ --&gt; &lt;missing&gt;/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/&lt;/missing&gt; &lt;/file&gt; &lt;/activation&gt; &lt;!--å¯¹åº”profileçš„æ‰©å±•å±æ€§åˆ—è¡¨ã€‚Mavenå±æ€§å’ŒAntä¸­çš„å±æ€§ä¸€æ ·ï¼Œå¯ä»¥ç”¨æ¥å­˜æ”¾ä¸€äº›å€¼ã€‚è¿™äº›å€¼å¯ä»¥åœ¨POMä¸­çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨æ ‡è®°$&#123;X&#125;æ¥ä½¿ç”¨ï¼Œè¿™é‡ŒXæ˜¯æŒ‡å±æ€§çš„åç§°ã€‚--&gt; &lt;!--å±æ€§æœ‰äº”ç§ä¸åŒçš„å½¢å¼ï¼Œå¹¶ä¸”éƒ½èƒ½åœ¨settings.xmlæ–‡ä»¶ä¸­è®¿é—®ã€‚ --&gt; &lt;!--1. env.X: åœ¨ä¸€ä¸ªå˜é‡å‰åŠ ä¸Š&quot;env.&quot;çš„å‰ç¼€ï¼Œä¼šè¿”å›ä¸€ä¸ªshellç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚,&quot;env.PATH&quot;æŒ‡ä»£äº†$pathç¯å¢ƒå˜é‡ï¼ˆåœ¨Windowsä¸Šæ˜¯%PATH%ï¼‰ã€‚ --&gt; &lt;!--2. project.xï¼šæŒ‡ä»£äº†POMä¸­å¯¹åº”çš„å…ƒç´ å€¼ã€‚ --&gt; &lt;!--3. settings.x: æŒ‡ä»£äº†settings.xmlä¸­å¯¹åº”å…ƒç´ çš„å€¼ã€‚ --&gt; &lt;!--4. Java System Properties: æ‰€æœ‰å¯é€šè¿‡java.lang.System.getProperties()è®¿é—®çš„å±æ€§éƒ½èƒ½åœ¨POMä¸­ä½¿ç”¨è¯¥å½¢å¼è®¿é—®ï¼Œ --&gt; &lt;!-- å¦‚/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jreã€‚ --&gt; &lt;!--5. x: åœ¨&lt;properties/&gt;å…ƒç´ ä¸­ï¼Œæˆ–è€…å¤–éƒ¨æ–‡ä»¶ä¸­è®¾ç½®ï¼Œä»¥$&#123;someVar&#125;çš„å½¢å¼ä½¿ç”¨ã€‚ --&gt; &lt;properties&gt; &lt;!-- å¦‚æœè¿™ä¸ªprofileè¢«æ¿€æ´»ï¼Œé‚£ä¹ˆå±æ€§$&#123;user.install&#125;å°±å¯ä»¥è¢«è®¿é—®äº† --&gt; &lt;user.install&gt;usr/local/winner/jobs/maven-guide&lt;/user.install&gt; &lt;/properties&gt; &lt;!--è¿œç¨‹ä»“åº“åˆ—è¡¨ï¼Œå®ƒæ˜¯Mavenç”¨æ¥å¡«å……æ„å»ºç³»ç»Ÿæœ¬åœ°ä»“åº“æ‰€ä½¿ç”¨çš„ä¸€ç»„è¿œç¨‹é¡¹ç›®ã€‚ --&gt; &lt;repositories&gt; &lt;!--åŒ…å«éœ€è¦è¿æ¥åˆ°è¿œç¨‹ä»“åº“çš„ä¿¡æ¯ --&gt; &lt;repository&gt; &lt;!--è¿œç¨‹ä»“åº“å”¯ä¸€æ ‡è¯† --&gt; &lt;id&gt;codehausSnapshots&lt;/id&gt; &lt;!--è¿œç¨‹ä»“åº“åç§° --&gt; &lt;name&gt;Codehaus Snapshots&lt;/name&gt; &lt;!--å¦‚ä½•å¤„ç†è¿œç¨‹ä»“åº“é‡Œå‘å¸ƒç‰ˆæœ¬çš„ä¸‹è½½ --&gt; &lt;releases&gt; &lt;!--trueæˆ–è€…falseè¡¨ç¤ºè¯¥ä»“åº“æ˜¯å¦ä¸ºä¸‹è½½æŸç§ç±»å‹æ„ä»¶ï¼ˆå‘å¸ƒç‰ˆï¼Œå¿«ç…§ç‰ˆï¼‰å¼€å¯ã€‚ --&gt; &lt;enabled&gt;false&lt;/enabled&gt; &lt;!--è¯¥å…ƒç´ æŒ‡å®šæ›´æ–°å‘ç”Ÿçš„é¢‘ç‡ã€‚Mavenä¼šæ¯”è¾ƒæœ¬åœ°POMå’Œè¿œç¨‹POMçš„æ—¶é—´æˆ³ã€‚è¿™é‡Œçš„é€‰é¡¹æ˜¯ï¼š--&gt; &lt;!--alwaysï¼ˆä¸€ç›´ï¼‰ï¼Œdailyï¼ˆé»˜è®¤ï¼Œæ¯æ—¥ï¼‰ï¼Œintervalï¼šXï¼ˆè¿™é‡ŒXæ˜¯ä»¥åˆ†é’Ÿä¸ºå•ä½çš„æ—¶é—´é—´éš”ï¼‰ï¼Œæˆ–è€…neverï¼ˆä»ä¸ï¼‰ã€‚ --&gt; &lt;updatePolicy&gt;always&lt;/updatePolicy&gt; &lt;!--å½“MavenéªŒè¯æ„ä»¶æ ¡éªŒæ–‡ä»¶å¤±è´¥æ—¶è¯¥æ€ä¹ˆåš:--&gt; &lt;!--ignoreï¼ˆå¿½ç•¥ï¼‰ï¼Œfailï¼ˆå¤±è´¥ï¼‰ï¼Œæˆ–è€…warnï¼ˆè­¦å‘Šï¼‰ã€‚ --&gt; &lt;checksumPolicy&gt;warn&lt;/checksumPolicy&gt; &lt;/releases&gt; &lt;!--å¦‚ä½•å¤„ç†è¿œç¨‹ä»“åº“é‡Œå¿«ç…§ç‰ˆæœ¬çš„ä¸‹è½½ã€‚æœ‰äº†releaseså’Œsnapshotsè¿™ä¸¤ç»„é…ç½®ï¼ŒPOMå°±å¯ä»¥åœ¨æ¯ä¸ªå•ç‹¬çš„ä»“åº“ä¸­ï¼Œä¸ºæ¯ç§ç±»å‹çš„æ„ä»¶é‡‡å–ä¸åŒçš„ç­–ç•¥ã€‚--&gt; &lt;!--ä¾‹å¦‚ï¼Œå¯èƒ½æœ‰äººä¼šå†³å®šåªä¸ºå¼€å‘ç›®çš„å¼€å¯å¯¹å¿«ç…§ç‰ˆæœ¬ä¸‹è½½çš„æ”¯æŒã€‚å‚è§repositories/repository/releaseså…ƒç´  --&gt; &lt;snapshots&gt; &lt;enabled /&gt; &lt;updatePolicy /&gt; &lt;checksumPolicy /&gt; &lt;/snapshots&gt; &lt;!--è¿œç¨‹ä»“åº“URLï¼ŒæŒ‰protocol://hostname/pathå½¢å¼ --&gt; &lt;url&gt;http://snapshots.maven.codehaus.org/maven2&lt;/url&gt; &lt;!--ç”¨äºå®šä½å’Œæ’åºæ„ä»¶çš„ä»“åº“å¸ƒå±€ç±»å‹-å¯ä»¥æ˜¯defaultï¼ˆé»˜è®¤ï¼‰æˆ–è€…legacyï¼ˆé—ç•™ï¼‰ã€‚--&gt; &lt;!--Maven 2ä¸ºå…¶ä»“åº“æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å¸ƒå±€ï¼›ç„¶è€Œï¼ŒMaven 1.xæœ‰ä¸€ç§ä¸åŒçš„å¸ƒå±€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å…ƒç´ æŒ‡å®šå¸ƒå±€æ˜¯defaultï¼ˆé»˜è®¤ï¼‰è¿˜æ˜¯legacyï¼ˆé—ç•™ï¼‰ã€‚ --&gt; &lt;layout&gt;default&lt;/layout&gt; &lt;/repository&gt; &lt;/repositories&gt; &lt;!--å‘ç°æ’ä»¶çš„è¿œç¨‹ä»“åº“åˆ—è¡¨ã€‚ä»“åº“æ˜¯ä¸¤ç§ä¸»è¦æ„ä»¶çš„å®¶ã€‚ç¬¬ä¸€ç§æ„ä»¶è¢«ç”¨ä½œå…¶å®ƒæ„ä»¶çš„ä¾èµ–ã€‚è¿™æ˜¯ä¸­å¤®ä»“åº“ä¸­å­˜å‚¨çš„å¤§éƒ¨åˆ†æ„ä»¶ç±»å‹ã€‚å¦å¤–ä¸€ç§æ„ä»¶ç±»å‹æ˜¯æ’ä»¶ã€‚--&gt; &lt;!--Mavenæ’ä»¶æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„æ„ä»¶ã€‚ç”±äºè¿™ä¸ªåŸå› ï¼Œæ’ä»¶ä»“åº“ç‹¬ç«‹äºå…¶å®ƒä»“åº“ã€‚pluginRepositorieså…ƒç´ çš„ç»“æ„å’Œrepositorieså…ƒç´ çš„ç»“æ„ç±»ä¼¼ã€‚--&gt; &lt;!--æ¯ä¸ªpluginRepositoryå…ƒç´ æŒ‡å®šä¸€ä¸ªMavenå¯ä»¥ç”¨æ¥å¯»æ‰¾æ–°æ’ä»¶çš„è¿œç¨‹åœ°å€ã€‚ --&gt; &lt;pluginRepositories&gt; &lt;!--åŒ…å«éœ€è¦è¿æ¥åˆ°è¿œç¨‹æ’ä»¶ä»“åº“çš„ä¿¡æ¯.å‚è§profiles/profile/repositories/repositoryå…ƒç´ çš„è¯´æ˜ --&gt; &lt;pluginRepository&gt; &lt;releases&gt; &lt;enabled /&gt; &lt;updatePolicy /&gt; &lt;checksumPolicy /&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled /&gt; &lt;updatePolicy /&gt; &lt;checksumPolicy /&gt; &lt;/snapshots&gt; &lt;id /&gt; &lt;name /&gt; &lt;url /&gt; &lt;layout /&gt; &lt;/pluginRepository&gt; &lt;/pluginRepositories&gt; &lt;!--æ‰‹åŠ¨æ¿€æ´»profilesçš„åˆ—è¡¨ï¼ŒæŒ‰ç…§profileè¢«åº”ç”¨çš„é¡ºåºå®šä¹‰activeProfileã€‚ è¯¥å…ƒç´ åŒ…å«äº†ä¸€ç»„activeProfileå…ƒç´ ï¼Œæ¯ä¸ªactiveProfileéƒ½å«æœ‰ä¸€ä¸ªprofile idã€‚--&gt; &lt;!--ä»»ä½•åœ¨activeProfileä¸­å®šä¹‰çš„profile idï¼Œä¸è®ºç¯å¢ƒè®¾ç½®å¦‚ä½•ï¼Œå…¶å¯¹åº”çš„ profileéƒ½ä¼šè¢«æ¿€æ´»ã€‚--&gt; &lt;!--å¦‚æœæ²¡æœ‰åŒ¹é…çš„profileï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿã€‚ä¾‹å¦‚ï¼Œenv-testæ˜¯ä¸€ä¸ªactiveProfileï¼Œåˆ™åœ¨pom.xmlï¼ˆæˆ–è€…profile.xmlï¼‰ä¸­å¯¹åº”idçš„profileä¼šè¢«æ¿€æ´»ã€‚--&gt; &lt;!--å¦‚æœè¿è¡Œè¿‡ç¨‹ä¸­æ‰¾ä¸åˆ°è¿™æ ·ä¸€ä¸ªprofileï¼ŒMavenåˆ™ä¼šåƒå¾€å¸¸ä¸€æ ·è¿è¡Œã€‚ --&gt; &lt;activeProfiles&gt; &lt;activeProfile&gt;env-test&lt;/activeProfile&gt; &lt;/activeProfiles&gt; &lt;/profile&gt; &lt;/profiles&gt;&lt;/settings&gt;","categories":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://xucux.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://xucux.github.io/tags/Java/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://xucux.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"Maven","slug":"Maven","permalink":"https://xucux.github.io/tags/Maven/"}],"author":"xucux"}],"categories":[{"name":"Java","slug":"Java","permalink":"https://xucux.github.io/categories/Java/"},{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://xucux.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://xucux.github.io/tags/Java/"},{"name":"ä¼ä¸šå¾®ä¿¡","slug":"ä¼ä¸šå¾®ä¿¡","permalink":"https://xucux.github.io/tags/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://xucux.github.io/tags/SpringBoot/"},{"name":"æŠ¥è­¦","slug":"æŠ¥è­¦","permalink":"https://xucux.github.io/tags/%E6%8A%A5%E8%AD%A6/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://xucux.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"Maven","slug":"Maven","permalink":"https://xucux.github.io/tags/Maven/"}]}